syntax = "proto3";

package matchmaker.v1;

import "game/v1/game.proto";

option go_package = "github.com/tobyrushton/globalfront/pb/matchmaker/v1";

service Matchmaker {
    rpc GetCurrentGame(GetCurrentGameRequest) returns (GetCurrentGameResponse);
    rpc JoinGame(JoinGameRequest) returns (stream JoinUpdate);
}

message GetCurrentGameRequest {}

message GetCurrentGameResponse {
    game.v1.Game game = 1;
}

message JoinGameRequest {}

message JoinUpdate {
    oneof update {
        JoinAcknowledgement acknowledgement = 1;
        ServerDetails server_details = 2;
        JoinError error = 3;
    }
}

message JoinAcknowledgement {
    string message = 1;
}

message ServerDetails {
    string id = 1;
}

message JoinError {
    string message = 1;
}